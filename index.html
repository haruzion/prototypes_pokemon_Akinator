import React, { useState, useEffect, useMemo, useRef } from 'react';
import { Home, Volume2, VolumeX, Sparkles } from 'lucide-react';

const App = () => {
  // --- Audio Engine (Web Audio API) ---
  const audioCtx = useRef(null);
  const [isMuted, setIsMuted] = useState(false);
  const currentBgmNodes = useRef([]);
  const loopTimeout = useRef(null);

  const initAudio = () => {
    if (!audioCtx.current) {
      audioCtx.current = new (window.AudioContext || window.webkitAudioContext)();
    }
    if (audioCtx.current.state === 'suspended') {
      audioCtx.current.resume();
    }
  };

  const playTone = (freq, type, duration, volume = 0.1, startTime = 0) => {
    if (isMuted || !audioCtx.current) return;
    const osc = audioCtx.current.createOscillator();
    const gain = audioCtx.current.createGain();
    osc.type = type;
    osc.frequency.setValueAtTime(freq, audioCtx.current.currentTime + startTime);
    gain.gain.setValueAtTime(volume, audioCtx.current.currentTime + startTime);
    gain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.current.currentTime + startTime + duration);
    osc.connect(gain);
    gain.connect(audioCtx.current.destination);
    osc.start(audioCtx.current.currentTime + startTime);
    osc.stop(audioCtx.current.currentTime + startTime + duration);
  };

  const playSE = (type) => {
    initAudio();
    switch(type) {
      case 'select':
        playTone(880, 'square', 0.1);
        setTimeout(() => playTone(1760, 'square', 0.05), 50);
        break;
      case 'back':
        playTone(440, 'square', 0.15);
        break;
      case 'fanfare':
        [523.25, 659.25, 783.99, 1046.50].forEach((f, i) => {
          setTimeout(() => playTone(f, 'square', 0.4, 0.05), i * 150);
        });
        break;
      case 'legend_fanfare':
        // Longer, more epic fanfare for legendary pokemon
        const legendNotes = [523.25, 523.25, 523.25, 523.25, 659.25, 783.99, 1046.50, 1318.51];
        legendNotes.forEach((f, i) => {
          const dur = i === legendNotes.length - 1 ? 1.5 : 0.2;
          setTimeout(() => playTone(f, 'square', dur, 0.07), i * 120);
        });
        // Add a sub-bass layer
        [261.63, 329.63, 392.00, 523.25].forEach((f, i) => {
          setTimeout(() => playTone(f, 'triangle', 1.0, 0.05), 800 + (i * 100));
        });
        break;
      default:
        break;
    }
  };

  const stopBGM = () => {
    if (loopTimeout.current) {
      clearTimeout(loopTimeout.current);
      loopTimeout.current = null;
    }
    currentBgmNodes.current.forEach(node => {
      try { node.stop(); } catch(e) {}
    });
    currentBgmNodes.current = [];
  };

  const playBGM = (scene) => {
    initAudio();
    stopBGM();
    if (isMuted) return;

    const bgmConfigs = {
      home: {
        tempo: 0.18,
        sequence: [
          { f: 392.00, d: 1 }, { f: 440.00, d: 1 }, { f: 392.00, d: 1 }, { f: 523.25, d: 1 },
          { f: 392.00, d: 1 }, { f: 440.00, d: 1 }, { f: 392.00, d: 1 }, { f: 523.25, d: 1 }
        ]
      },
      quiz: {
        tempo: 0.15,
        sequence: [
          { f: 440.00, d: 1 }, { f: 440.00, d: 1 }, { f: 523.25, d: 2 },
          { f: 493.88, d: 1 }, { f: 493.88, d: 1 }, { f: 392.00, d: 2 }
        ]
      },
      pokedex: {
        tempo: 0.2,
        sequence: [
          { f: 523.25, d: 1 }, { f: 659.25, d: 1 }, { f: 587.33, d: 1 }, { f: 698.46, d: 1 }
        ]
      }
    };

    const config = bgmConfigs[scene] || bgmConfigs.home;
    const totalBeats = config.sequence.reduce((acc, note) => acc + note.d, 0);
    const loopDuration = totalBeats * config.tempo;

    const scheduleLoop = () => {
      if (isMuted) return;
      const now = audioCtx.current.currentTime;
      let offset = 0;
      
      config.sequence.forEach((note) => {
        const osc = audioCtx.current.createOscillator();
        const gain = audioCtx.current.createGain();
        osc.type = 'square';
        osc.frequency.setValueAtTime(note.f, now + offset);
        gain.gain.setValueAtTime(0.015, now + offset);
        gain.gain.linearRampToValueAtTime(0, now + offset + (note.d * config.tempo) - 0.01);
        osc.connect(gain);
        gain.connect(audioCtx.current.destination);
        osc.start(now + offset);
        osc.stop(now + offset + (note.d * config.tempo));
        currentBgmNodes.current.push(osc);
        offset += note.d * config.tempo;
      });

      loopTimeout.current = setTimeout(scheduleLoop, loopDuration * 1000);
    };

    scheduleLoop();
  };

  // --- FULL 151 POKEMON DATA ---
  const POKEMON_DATA = useMemo(() => [
    { id: 1, name: "„Éï„Ç∑„ÇÆ„ÉÄ„Éç", types: ["„Åè„Åï", "„Å©„Åè"], color: "„Åø„Å©„Çä", stage: 0 },
    { id: 2, name: "„Éï„Ç∑„ÇÆ„ÇΩ„Ç¶", types: ["„Åè„Åï", "„Å©„Åè"], color: "„Åø„Å©„Çä", stage: 1 },
    { id: 3, name: "„Éï„Ç∑„ÇÆ„Éê„Éä", types: ["„Åè„Åï", "„Å©„Åè"], color: "„Åø„Å©„Çä", stage: 2 },
    { id: 4, name: "„Éí„Éà„Ç´„Ç≤", types: ["„Åª„ÅÆ„Åä"], color: "„ÅÇ„Åã", stage: 0 },
    { id: 5, name: "„É™„Ç∂„Éº„Éâ", types: ["„Åª„ÅÆ„Åä"], color: "„ÅÇ„Åã", stage: 1 },
    { id: 6, name: "„É™„Ç∂„Éº„Éâ„É≥", types: ["„Åª„ÅÆ„Åä", "„Å≤„Åì„ÅÜ"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 7, name: "„Çº„Éã„Ç¨„É°", types: ["„Åø„Åö"], color: "„ÅÇ„Åä", stage: 0 },
    { id: 8, name: "„Ç´„É°„Éº„É´", types: ["„Åø„Åö"], color: "„ÅÇ„Åä", stage: 1 },
    { id: 9, name: "„Ç´„É°„ÉÉ„ÇØ„Çπ", types: ["„Åø„Åö"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 10, name: "„Ç≠„É£„Çø„Éî„Éº", types: ["„ÇÄ„Åó"], color: "„Åø„Å©„Çä", stage: 0 },
    { id: 11, name: "„Éà„É©„É≥„Çª„É´", types: ["„ÇÄ„Åó"], color: "„Åø„Å©„Çä", stage: 1 },
    { id: 12, name: "„Éê„Çø„Éï„É™„Éº", types: ["„ÇÄ„Åó", "„Å≤„Åì„ÅÜ"], color: "„Åó„Çç", stage: 2 },
    { id: 13, name: "„Éì„Éº„Éâ„É´", types: ["„ÇÄ„Åó", "„Å©„Åè"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 14, name: "„Ç≥„ÇØ„Éº„É≥", types: ["„ÇÄ„Åó", "„Å©„Åè"], color: "„Åç„ÅÑ„Çç", stage: 1 },
    { id: 15, name: "„Çπ„Éî„Ç¢„Éº", types: ["„ÇÄ„Åó", "„Å©„Åè"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 16, name: "„Éù„ÉÉ„Éù", types: ["„Éé„Éº„Éû„É´", "„Å≤„Åì„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 17, name: "„Éî„Ç∏„Éß„É≥", types: ["„Éé„Éº„Éû„É´", "„Å≤„Åì„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 1 },
    { id: 18, name: "„Éî„Ç∏„Éß„ÉÉ„Éà", types: ["„Éé„Éº„Éû„É´", "„Å≤„Åì„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 19, name: "„Ç≥„É©„ÉÉ„Çø", types: ["„Éé„Éº„Éû„É´"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 0 },
    { id: 20, name: "„É©„ÉÉ„Çø", types: ["„Éé„Éº„Éû„É´"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 21, name: "„Ç™„Éã„Çπ„Ç∫„É°", types: ["„Éé„Éº„Éû„É´", "„Å≤„Åì„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 22, name: "„Ç™„Éã„Éâ„É™„É´", types: ["„Éé„Éº„Éû„É´", "„Å≤„Åì„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 23, name: "„Ç¢„Éº„Éú", types: ["„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 0 },
    { id: 24, name: "„Ç¢„Éº„Éú„ÉÉ„ÇØ", types: ["„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 25, name: "„Éî„Ç´„ÉÅ„É•„Ç¶", types: ["„Åß„Çì„Åç"], color: "„Åç„ÅÑ„Çç", stage: 1 },
    { id: 26, name: "„É©„Ç§„ÉÅ„É•„Ç¶", types: ["„Åß„Çì„Åç"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 27, name: "„Çµ„É≥„Éâ", types: ["„Åò„ÇÅ„Çì"], color: "„Åç„ÅÑ„Çç", stage: 0 },
    { id: 28, name: "„Çµ„É≥„Éâ„Éë„É≥", types: ["„Åò„ÇÅ„Çì"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 29, name: "„Éã„Éâ„É©„É≥‚ôÄ", types: ["„Å©„Åè"], color: "„ÅÇ„Åä", stage: 0 },
    { id: 30, name: "„Éã„Éâ„É™„Éº„Éä", types: ["„Å©„Åè"], color: "„ÅÇ„Åä", stage: 1 },
    { id: 31, name: "„Éã„Éâ„ÇØ„Ç§„É≥", types: ["„Å©„Åè", "„Åò„ÇÅ„Çì"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 32, name: "„Éã„Éâ„É©„É≥‚ôÇ", types: ["„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 0 },
    { id: 33, name: "„Éã„Éâ„É™„Éº„Éé", types: ["„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 1 },
    { id: 34, name: "„Éã„Éâ„Ç≠„É≥„Ç∞", types: ["„Å©„Åè", "„Åò„ÇÅ„Çì"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 35, name: "„Éî„ÉÉ„Éî", types: ["„Éï„Çß„Ç¢„É™„Éº"], color: "„Éî„É≥„ÇØ", stage: 1 },
    { id: 36, name: "„Éî„ÇØ„Ç∑„Éº", types: ["„Éï„Çß„Ç¢„É™„Éº"], color: "„Éî„É≥„ÇØ", stage: 2 },
    { id: 37, name: "„É≠„Ç≥„É≥", types: ["„Åª„ÅÆ„Åä"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 38, name: "„Ç≠„É•„Ç¶„Ç≥„É≥", types: ["„Åª„ÅÆ„Åä"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 39, name: "„Éó„É™„É≥", types: ["„Éé„Éº„Éû„É´", "„Éï„Çß„Ç¢„É™„Éº"], color: "„Éî„É≥„ÇØ", stage: 1 },
    { id: 40, name: "„Éó„ÇØ„É™„É≥", types: ["„Éé„Éº„Éû„É´", "„Éï„Çß„Ç¢„É™„Éº"], color: "„Éî„É≥„ÇØ", stage: 2 },
    { id: 41, name: "„Ç∫„Éê„ÉÉ„Éà", types: ["„Å©„Åè", "„Å≤„Åì„ÅÜ"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 0 },
    { id: 42, name: "„Ç¥„É´„Éê„ÉÉ„Éà", types: ["„Å©„Åè", "„Å≤„Åì„ÅÜ"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 1 },
    { id: 43, name: "„Éä„Çæ„Éé„ÇØ„Çµ", types: ["„Åè„Åï", "„Å©„Åè"], color: "„ÅÇ„Åä", stage: 0 },
    { id: 44, name: "„ÇØ„Çµ„Ç§„Éè„Éä", types: ["„Åè„Åï", "„Å©„Åè"], color: "„ÅÇ„Åä", stage: 1 },
    { id: 45, name: "„É©„Éï„É¨„Ç∑„Ç¢", types: ["„Åè„Åï", "„Å©„Åè"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 46, name: "„Éë„É©„Çπ", types: ["„ÇÄ„Åó", "„Åè„Åï"], color: "„ÅÇ„Åã", stage: 0 },
    { id: 47, name: "„Éë„É©„Çª„ÇØ„Éà", types: ["„ÇÄ„Åó", "„Åè„Åï"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 48, name: "„Ç≥„É≥„Éë„É≥", types: ["„ÇÄ„Åó", "„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 0 },
    { id: 49, name: "„É¢„É´„Éï„Ç©„É≥", types: ["„ÇÄ„Åó", "„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 50, name: "„Éá„Ç£„Ç∞„ÉÄ", types: ["„Åò„ÇÅ„Çì"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 51, name: "„ÉÄ„Ç∞„Éà„É™„Ç™", types: ["„Åò„ÇÅ„Çì"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 52, name: "„Éã„É£„Éº„Çπ", types: ["„Éé„Éº„Éû„É´"], color: "„Åó„Çç", stage: 0 },
    { id: 53, name: "„Éö„É´„Ç∑„Ç¢„É≥", types: ["„Éé„Éº„Éû„É´"], color: "„Åó„Çç", stage: 2 },
    { id: 54, name: "„Ç≥„ÉÄ„ÉÉ„ÇØ", types: ["„Åø„Åö"], color: "„Åç„ÅÑ„Çç", stage: 0 },
    { id: 55, name: "„Ç¥„É´„ÉÄ„ÉÉ„ÇØ", types: ["„Åø„Åö"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 56, name: "„Éû„É≥„Ç≠„Éº", types: ["„Åã„Åè„Å®„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 57, name: "„Ç™„Ç≥„É™„Ç∂„É´", types: ["„Åã„Åè„Å®„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 58, name: "„Ç¨„Éº„Éá„Ç£", types: ["„Åª„ÅÆ„Åä"], color: "„ÅÇ„Åã", stage: 0 },
    { id: 59, name: "„Ç¶„Ç§„É≥„Éá„Ç£", types: ["„Åª„ÅÆ„Åä"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 60, name: "„Éã„Éß„É≠„É¢", types: ["„Åø„Åö"], color: "„ÅÇ„Åä", stage: 0 },
    { id: 61, name: "„Éã„Éß„É≠„Çæ", types: ["„Åø„Åö"], color: "„ÅÇ„Åä", stage: 1 },
    { id: 62, name: "„Éã„Éß„É≠„Éú„É≥", types: ["„Åø„Åö", "„Åã„Åè„Å®„ÅÜ"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 63, name: "„Ç±„Éº„Ç∑„Ç£", types: ["„Ç®„Çπ„Éë„Éº"], color: "„Åç„ÅÑ„Çç", stage: 0 },
    { id: 64, name: "„É¶„É≥„Ç≤„É©„Éº", types: ["„Ç®„Çπ„Éë„Éº"], color: "„Åç„ÅÑ„Çç", stage: 1 },
    { id: 65, name: "„Éï„Éº„Éá„Ç£„É≥", types: ["„Ç®„Çπ„Éë„Éº"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 66, name: "„ÉØ„É≥„É™„Ç≠„Éº", types: ["„Åã„Åè„Å®„ÅÜ"], color: "„Ç∞„É¨„Éº", stage: 0 },
    { id: 67, name: "„Ç¥„Éº„É™„Ç≠„Éº", types: ["„Åã„Åè„Å®„ÅÜ"], color: "„Ç∞„É¨„Éº", stage: 1 },
    { id: 68, name: "„Ç´„Ç§„É™„Ç≠„Éº", types: ["„Åã„Åè„Å®„ÅÜ"], color: "„Ç∞„É¨„Éº", stage: 2 },
    { id: 69, name: "„Éû„ÉÄ„ÉÑ„Éú„Éü", types: ["„Åè„Åï", "„Å©„Åè"], color: "„Åø„Å©„Çä", stage: 0 },
    { id: 70, name: "„Ç¶„ÉÑ„Éâ„É≥", types: ["„Åè„Åï", "„Å©„Åè"], color: "„Åø„Å©„Çä", stage: 1 },
    { id: 71, name: "„Ç¶„ÉÑ„Éú„ÉÉ„Éà", types: ["„Åè„Åï", "„Å©„Åè"], color: "„Åø„Å©„Çä", stage: 2 },
    { id: 72, name: "„É°„Éé„ÇØ„É©„Ç≤", types: ["„Åø„Åö", "„Å©„Åè"], color: "„ÅÇ„Åä", stage: 0 },
    { id: 73, name: "„Éâ„ÇØ„ÇØ„É©„Ç≤", types: ["„Åø„Åö", "„Å©„Åè"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 74, name: "„Ç§„Ç∑„ÉÑ„Éñ„ÉÜ", types: ["„ÅÑ„Çè", "„Åò„ÇÅ„Çì"], color: "„Ç∞„É¨„Éº", stage: 0 },
    { id: 75, name: "„Ç¥„É≠„Éº„É≥", types: ["„ÅÑ„Çè", "„Åò„ÇÅ„Çì"], color: "„Ç∞„É¨„Éº", stage: 1 },
    { id: 76, name: "„Ç¥„É≠„Éº„Éã„É£", types: ["„ÅÑ„Çè", "„Åò„ÇÅ„Çì"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 77, name: "„Éù„Éã„Éº„Çø", types: ["„Åª„ÅÆ„Åä"], color: "„Åó„Çç", stage: 0 },
    { id: 78, name: "„ÇÆ„É£„É≠„ÉÉ„Éó", types: ["„Åª„ÅÆ„Åä"], color: "„Åó„Çç", stage: 2 },
    { id: 79, name: "„É§„Éâ„É≥", types: ["„Åø„Åö", "„Ç®„Çπ„Éë„Éº"], color: "„Éî„É≥„ÇØ", stage: 0 },
    { id: 80, name: "„É§„Éâ„É©„É≥", types: ["„Åø„Åö", "„Ç®„Çπ„Éë„Éº"], color: "„Éî„É≥„ÇØ", stage: 2 },
    { id: 81, name: "„Ç≥„Ç§„É´", types: ["„Åß„Çì„Åç", "„ÅØ„Åå„Å≠"], color: "„Ç∞„É¨„Éº", stage: 0 },
    { id: 82, name: "„É¨„Ç¢„Ç≥„Ç§„É´", types: ["„Åß„Çì„Åç", "„ÅØ„Åå„Å≠"], color: "„Ç∞„É¨„Éº", stage: 2 },
    { id: 83, name: "„Ç´„É¢„Éç„ÇÆ", types: ["„Éé„Éº„Éû„É´", "„Å≤„Åì„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 84, name: "„Éâ„Éº„Éâ„Éº", types: ["„Éé„Éº„Éû„É´", "„Å≤„Åì„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 85, name: "„Éâ„Éº„Éâ„É™„Ç™", types: ["„Éé„Éº„Éû„É´", "„Å≤„Åì„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 86, name: "„Éë„Ç¶„ÉØ„Ç¶", types: ["„Åø„Åö"], color: "„Åó„Çç", stage: 0 },
    { id: 87, name: "„Ç∏„É•„Ç¥„É≥", types: ["„Åø„Åö", "„Åì„Åä„Çä"], color: "„Åó„Çç", stage: 2 },
    { id: 88, name: "„Éô„Éà„Éô„Çø„Éº", types: ["„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 0 },
    { id: 89, name: "„Éô„Éà„Éô„Éà„É≥", types: ["„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 90, name: "„Ç∑„Çß„É´„ÉÄ„Éº", types: ["„Åø„Åö"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 0 },
    { id: 91, name: "„Éë„É´„Ç∑„Çß„É≥", types: ["„Åø„Åö", "„Åì„Åä„Çä"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 92, name: "„Ç¥„Éº„Çπ", types: ["„Ç¥„Éº„Çπ„Éà", "„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 0 },
    { id: 93, name: "„Ç¥„Éº„Çπ„Éà", types: ["„Ç¥„Éº„Çπ„Éà", "„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 1 },
    { id: 94, name: "„Ç≤„É≥„Ç¨„Éº", types: ["„Ç¥„Éº„Çπ„Éà", "„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 95, name: "„Ç§„ÉØ„Éº„ÇØ", types: ["„ÅÑ„Çè", "„Åò„ÇÅ„Çì"], color: "„Ç∞„É¨„Éº", stage: 2 },
    { id: 96, name: "„Çπ„É™„Éº„Éó", types: ["„Ç®„Çπ„Éë„Éº"], color: "„Åç„ÅÑ„Çç", stage: 0 },
    { id: 97, name: "„Çπ„É™„Éº„Éë„Éº", types: ["„Ç®„Çπ„Éë„Éº"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 98, name: "„ÇØ„É©„Éñ", types: ["„Åø„Åö"], color: "„ÅÇ„Åã", stage: 0 },
    { id: 99, name: "„Ç≠„É≥„Ç∞„É©„Éº", types: ["„Åø„Åö"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 100, name: "„Éì„É™„É™„ÉÄ„Éû", types: ["„Åß„Çì„Åç"], color: "„ÅÇ„Åã", stage: 0 },
    { id: 101, name: "„Éû„É´„Éû„Ç§„É≥", types: ["„Åß„Çì„Åç"], color: "„Åó„Çç", stage: 2 },
    { id: 102, name: "„Çø„Éû„Çø„Éû", types: ["„Åè„Åï", "„Ç®„Çπ„Éë„Éº"], color: "„Éî„É≥„ÇØ", stage: 0 },
    { id: 103, name: "„Éä„ÉÉ„Ç∑„Éº", types: ["„Åè„Åï", "„Ç®„Çπ„Éë„Éº"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 104, name: "„Ç´„É©„Ç´„É©", types: ["„Åò„ÇÅ„Çì"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 105, name: "„Ç¨„É©„Ç¨„É©", types: ["„Åò„ÇÅ„Çì"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 106, name: "„Çµ„ÉØ„É†„É©„Éº", types: ["„Åã„Åè„Å®„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 107, name: "„Ç®„Éì„ÉØ„É©„Éº", types: ["„Åã„Åè„Å®„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 108, name: "„Éô„É≠„É™„É≥„Ç¨", types: ["„Éé„Éº„Éû„É´"], color: "„Éî„É≥„ÇØ", stage: 2 },
    { id: 109, name: "„Éâ„Ç¨„Éº„Çπ", types: ["„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 0 },
    { id: 110, name: "„Éû„Çø„Éâ„Ç¨„Çπ", types: ["„Å©„Åè"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 111, name: "„Çµ„Ç§„Éõ„Éº„É≥", types: ["„Åò„ÇÅ„Çì", "„ÅÑ„Çè"], color: "„Ç∞„É¨„Éº", stage: 0 },
    { id: 112, name: "„Çµ„Ç§„Éâ„É≥", types: ["„Åò„ÇÅ„Çì", "„ÅÑ„Çè"], color: "„Ç∞„É¨„Éº", stage: 2 },
    { id: 113, name: "„É©„ÉÉ„Ç≠„Éº", types: ["„Éé„Éº„Éû„É´"], color: "„Éî„É≥„ÇØ", stage: 2 },
    { id: 114, name: "„É¢„É≥„Ç∏„É£„É©", types: ["„Åè„Åï"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 115, name: "„Ç¨„É´„Éº„É©", types: ["„Éé„Éº„Éû„É´"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 116, name: "„Çø„ÉÉ„ÉÑ„Éº", types: ["„Åø„Åö"], color: "„ÅÇ„Åä", stage: 0 },
    { id: 117, name: "„Ç∑„Éº„Éâ„É©", types: ["„Åø„Åö"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 118, name: "„Éà„Çµ„Ç≠„É≥„Éà", types: ["„Åø„Åö"], color: "„Åó„Çç", stage: 0 },
    { id: 119, name: "„Ç¢„Ç∫„Éû„Ç™„Ç¶", types: ["„Åø„Åö"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 120, name: "„Éí„Éà„Éá„Éû„É≥", types: ["„Åø„Åö"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 121, name: "„Çπ„Çø„Éº„Éü„Éº", types: ["„Åø„Åö", "„Ç®„Çπ„Éë„Éº"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 122, name: "„Éê„É™„É§„Éº„Éâ", types: ["„Ç®„Çπ„Éë„Éº", "„Éï„Çß„Ç¢„É™„Éº"], color: "„Éî„É≥„ÇØ", stage: 2 },
    { id: 123, name: "„Çπ„Éà„É©„Ç§„ÇØ", types: ["„ÇÄ„Åó", "„Å≤„Åì„ÅÜ"], color: "„Åø„Å©„Çä", stage: 2 },
    { id: 124, name: "„É´„Éº„Ç∏„É•„É©", types: ["„Åì„Åä„Çä", "„Ç®„Çπ„Éë„Éº"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 125, name: "„Ç®„É¨„Éñ„Éº", types: ["„Åß„Çì„Åç"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 126, name: "„Éñ„Éº„Éê„Éº", types: ["„Åª„ÅÆ„Åä"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 127, name: "„Ç´„Ç§„É≠„Çπ", types: ["„ÇÄ„Åó"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 128, name: "„Ç±„É≥„Çø„É≠„Çπ", types: ["„Éé„Éº„Éû„É´"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 129, name: "„Ç≥„Ç§„Ç≠„É≥„Ç∞", types: ["„Åø„Åö"], color: "„ÅÇ„Åã", stage: 0 },
    { id: 130, name: "„ÇÆ„É£„É©„Éâ„Çπ", types: ["„Åø„Åö", "„Å≤„Åì„ÅÜ"], color: "„ÅÇÊôÆÂèä", stage: 2 },
    { id: 131, name: "„É©„Éó„É©„Çπ", types: ["„Åø„Åö", "„Åì„Åä„Çä"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 132, name: "„É°„Çø„É¢„É≥", types: ["„Éé„Éº„Éû„É´"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 133, name: "„Ç§„Éº„Éñ„Ç§", types: ["„Éé„Éº„Éû„É´"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 134, name: "„Ç∑„É£„ÉØ„Éº„Ç∫", types: ["„Åø„Åö"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 135, name: "„Çµ„É≥„ÉÄ„Éº„Çπ", types: ["„Åß„Çì„Åç"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 136, name: "„Éñ„Éº„Çπ„Çø„Éº", types: ["„Åª„ÅÆ„Åä"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 137, name: "„Éù„É™„Ç¥„É≥", types: ["„Éé„Éº„Éû„É´"], color: "„Éî„É≥„ÇØ", stage: 2 },
    { id: 138, name: "„Ç™„É†„Éä„Ç§„Éà", types: ["„ÅÑ„Çè", "„Åø„Åö"], color: "„ÅÇ„Åä", stage: 0 },
    { id: 139, name: "„Ç™„É†„Çπ„Çø„Éº", types: ["„ÅÑ„Çè", "„Åø„Åö"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 140, name: "„Ç´„Éñ„Éà", types: ["„ÅÑ„Çè", "„Åø„Åö"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 0 },
    { id: 141, name: "„Ç´„Éñ„Éà„Éó„Çπ", types: ["„ÅÑ„Çè", "„Åø„Åö"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 142, name: "„Éó„ÉÜ„É©", types: ["„ÅÑ„Çè", "„Å≤„Åì„ÅÜ"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 143, name: "„Ç´„Éì„Ç¥„É≥", types: ["„Éé„Éº„Éû„É´"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 144, name: "„Éï„É™„Éº„Ç∂„Éº", types: ["„Åì„Åä„Çä", "„Å≤„Åì„ÅÜ"], color: "„ÅÇ„Åä", stage: 2 },
    { id: 145, name: "„Çµ„É≥„ÉÄ„Éº", types: ["„Åß„Çì„Åç", "„Å≤„Åì„ÅÜ"], color: "„Åç„ÅÑ„Çç", stage: 2 },
    { id: 146, name: "„Éï„Ç°„Ç§„É§„Éº", types: ["„Åª„ÅÆ„Åä", "„Å≤„Åì„ÅÜ"], color: "„ÅÇ„Åã", stage: 2 },
    { id: 147, name: "„Éü„Éã„É™„É•„Ç¶", types: ["„Éâ„É©„Ç¥„É≥"], color: "„ÅÇ„Åä", stage: 0 },
    { id: 148, name: "„Éè„ÇØ„É™„É•„Éº", types: ["„Éâ„É©„Ç¥„É≥"], color: "„ÅÇ„Åä", stage: 1 },
    { id: 149, name: "„Ç´„Ç§„É™„É•„Éº", types: ["„Éâ„É©„Ç¥„É≥", "„Å≤„Åì„ÅÜ"], color: "„Å°„ÇÉ„ÅÑ„Çç", stage: 2 },
    { id: 150, name: "„Éü„É•„Ç¶„ÉÑ„Éº", types: ["„Ç®„Çπ„Éë„Éº"], color: "„ÇÄ„Çâ„Åï„Åç", stage: 2 },
    { id: 151, name: "„Éü„É•„Ç¶", types: ["„Ç®„Çπ„Éë„Éº"], color: "„Éî„É≥„ÇØ", stage: 2 }
  ], []);

  // --- States ---
  const [view, setView] = useState('home'); 
  const [candidates, setCandidates] = useState([]);
  const [history, setHistory] = useState([]);
  const [currentQ, setCurrentQ] = useState(null);
  const [foundIds, setFoundIds] = useState([]);
  const [showCanning, setShowCanning] = useState(false);
  const [selectedInDex, setSelectedInDex] = useState(null);
  const [isLegendaryEffect, setIsLegendaryEffect] = useState(false);

  useEffect(() => {
    const saved = localStorage.getItem('kanto_akinator_v2');
    if (saved) setFoundIds(JSON.parse(saved));
  }, []);

  const changeView = (newView) => {
    playSE(newView === 'home' && view !== 'guess' ? 'back' : 'select');
    setView(newView);
    playBGM(newView);
    if (newView !== 'guess') setIsLegendaryEffect(false);
  };

  const startQuiz = () => {
    setCandidates([...POKEMON_DATA]);
    setHistory([]);
    changeView('quiz');
  };

  useEffect(() => {
    if (view !== 'quiz') return;
    if (candidates.length <= 1) {
      const p = candidates[0];
      const isRare = p && (p.id >= 144 && p.id <= 151);
      
      if (candidates.length === 1) {
        if (isRare) {
          setIsLegendaryEffect(true);
          playSE('legend_fanfare');
        } else {
          playSE('fanfare');
        }
      }
      setView('guess');
      return;
    }
    const next = getBestQuestion(candidates, history);
    if (!next) setView('guess');
    else setCurrentQ(next);
  }, [candidates, view, history]);

  const getBestQuestion = (cands, hist) => {
    let bestOption = null;
    let minDiff = Infinity;
    const mid = cands.length / 2;

    const tryAdd = (id, text, filter) => {
      if (hist.includes(id)) return;
      const count = cands.filter(filter).length;
      if (count === 0 || count === cands.length) return;
      const diff = Math.abs(count - mid);
      if (diff < minDiff) {
        minDiff = diff;
        bestOption = { id, text, filter };
      }
    };

    const types = ["„Éé„Éº„Éû„É´","„Åª„ÅÆ„Åä","„Åø„Åö","„Åè„Åï","„Åß„Çì„Åç","„Åì„Åä„Çä","„Åã„Åè„Å®„ÅÜ","„Å©„Åè","„Åò„ÇÅ„Çì","„Å≤„Åì„ÅÜ","„Ç®„Çπ„Éë„Éº","„ÇÄ„Åó","„ÅÑ„Çè","„Ç¥„Éº„Çπ„Éà","„Éâ„É©„Ç¥„É≥"];
    types.forEach(t => tryAdd(`t_${t}`, `${t}„Çø„Ç§„Éó„ÄÄ„ÅÆ„Å™„Åã„ÅæÔºü`, p => p.types.includes(t)));
    
    const colors = ["„ÅÇ„Åã","„ÅÇ„Åä","„Åç„ÅÑ„Çç","„Åø„Å©„Çä","„Å°„ÇÉ„ÅÑ„Çç","„ÇÄ„Çâ„Åï„Åç","„Ç∞„É¨„Éº","„Åó„Çç","„Éî„É≥„ÇØ"];
    colors.forEach(c => tryAdd(`c_${c}`, `„Åã„Çâ„Å†„ÅÆ„ÅÑ„Çç„ÅØ„ÄÄ${c}Ôºü`, p => p.color === c));
    
    tryAdd(`s0`, "„Åó„Çì„Åã„ÄÄ„Åó„Å¶„ÅÑ„Å™„ÅÑÔºü", p => p.stage === 0);
    tryAdd(`s2`, "„Åó„Çì„Åã„ÅÆ„ÄÄ„Åï„ÅÑ„Åó„ÇÖ„ÅÜ„Åë„ÅÑÔºü", p => p.stage === 2);

    return bestOption;
  };

  const handleAnswer = (isYes) => {
    playSE('select');
    setHistory([...history, currentQ.id]);
    setCandidates(isYes ? candidates.filter(currentQ.filter) : candidates.filter(p => !currentQ.filter(p)));
  };

  const finish = () => {
    const p = candidates[0];
    if (p && !foundIds.includes(p.id)) {
      const nextFound = [...foundIds, p.id].sort((a,b) => a-b);
      setFoundIds(nextFound);
      localStorage.setItem('kanto_akinator_v2', JSON.stringify(nextFound));
    }
    changeView('home');
  };

  return (
    <div className="min-h-screen bg-zinc-300 flex flex-col items-center justify-center p-4 font-mono select-none overflow-hidden">
      
      {/* GameBoy Housing */}
      <div className="w-full max-w-sm bg-zinc-400 rounded-xl p-6 shadow-2xl border-4 border-zinc-500 flex flex-col relative">
        
        {/* Mute Toggle */}
        <button 
            onClick={() => { initAudio(); setIsMuted(!isMuted); stopBGM(); if(isMuted) playBGM(view); }}
            className="absolute top-2 right-2 p-2 text-zinc-600 hover:text-zinc-800 z-30"
        >
            {isMuted ? <VolumeX size={16}/> : <Volume2 size={16}/>}
        </button>

        <div className="bg-zinc-500 p-2 mb-4 rounded flex justify-between items-center text-[8px] font-bold text-zinc-300">
            <span>‚óè BATTERY</span>
            <span className="flex gap-2">COMM. <div className="w-1 h-1 bg-zinc-600 rounded-full animate-pulse"></div></span>
        </div>

        {/* Screen */}
        <div className={`bg-[#8bac0f] border-8 border-zinc-800 aspect-square relative overflow-hidden flex flex-col p-2 text-[#0f380f] transition-colors duration-300 ${isLegendaryEffect ? 'animate-flash' : ''}`}>
            {/* Scanlines layer */}
            <div className="absolute inset-0 pointer-events-none opacity-5 bg-repeat z-20" style={{ backgroundImage: 'linear-gradient(rgba(15, 56, 15, 0.5) 1px, transparent 1px), linear-gradient(90deg, rgba(15, 56, 15, 0.5) 1px, transparent 1px)', backgroundSize: '3px 3px' }}></div>
            
            {/* Rare Pokemon Border Effect */}
            {isLegendaryEffect && (
              <div className="absolute inset-0 border-4 border-[#0f380f] border-double animate-pulse z-10 pointer-events-none"></div>
            )}

            <div className="flex-1 flex flex-col overflow-hidden">
                {view === 'home' && (
                    <div className="flex-1 flex flex-col items-center justify-between py-4">
                        <div className="text-center">
                            <h1 className="text-3xl font-black border-b-4 border-[#0f380f] mb-1">AKINETOR</h1>
                            <p className="text-[10px] font-bold tracking-widest italic uppercase">Pocket Version 151+</p>
                        </div>
                        <div className="w-full space-y-2 px-4">
                            <button onClick={startQuiz} className="w-full border-4 border-[#0f380f] py-2 text-sm font-black hover:bg-[#306230] hover:text-[#8bac0f] active:bg-[#0f380f]">
                                ‚ñ∂ „ÅØ„Åò„ÇÅ„Çã
                            </button>
                            <button onClick={() => changeView('pokedex')} className="w-full border-4 border-[#0f380f] py-2 text-sm font-black hover:bg-[#306230] hover:text-[#8bac0f] active:bg-[#0f380f]">
                                üìñ „Éù„Ç±„É¢„É≥„ÄÄ„Åö„Åã„Çì
                            </button>
                        </div>
                        <div className="text-[8px] font-bold text-center leading-tight">
                            ¬©199X GEMINI SYSTEMS / <br/>
                            CREATIVE MONSTERS INC.
                        </div>
                    </div>
                )}

                {view === 'quiz' && (
                    <div className="flex-1 flex flex-col justify-between overflow-hidden">
                        <div className="flex justify-between items-start text-[10px] font-bold">
                            <span>Q.{history.length+1}</span>
                            <button onClick={() => { playSE('select'); setShowCanning(!showCanning); }} className="bg-[#306230] text-[#8bac0f] px-1">
                                {showCanning ? "HIDE" : "CANNING"}
                            </button>
                        </div>
                        <div className="flex-1 flex items-center justify-center p-2">
                            <p className="text-base font-black text-center leading-tight">
                                {currentQ?.text}
                            </p>
                        </div>
                        {showCanning && (
                            <div className="absolute top-8 left-2 right-2 bg-[#9bbc0f] border-4 border-[#0f380f] p-1 z-10 text-[8px] max-h-32 overflow-y-auto no-scrollbar">
                                <div className="font-bold border-b border-[#0f380f] mb-1 uppercase">Candidates ({candidates.length})</div>
                                <div className="flex flex-wrap gap-x-2">
                                    {candidates.map(p => <span key={p.id}>„Éª{p.name}</span>)}
                                </div>
                            </div>
                        )}
                        <div className="border-t-4 border-[#0f380f] h-20 flex shrink-0">
                            <button onClick={() => handleAnswer(true)} className="flex-1 border-r-4 border-[#0f380f] font-black text-xl hover:bg-[#306230] hover:text-[#8bac0f]">„ÅØ„ÅÑ</button>
                            <button onClick={() => handleAnswer(false)} className="flex-1 font-black text-xl hover:bg-[#306230] hover:text-[#8bac0f]">„ÅÑ„ÅÑ„Åà</button>
                        </div>
                    </div>
                )}

                {view === 'guess' && (
                    <div className="flex-1 flex flex-col justify-between items-center py-4 overflow-hidden">
                        <div className={`text-xs font-black uppercase border-b-2 border-[#0f380f] px-2 ${isLegendaryEffect ? 'bg-[#0f380f] text-[#8bac0f]' : ''}`}>
                            {isLegendaryEffect ? "‚ú® LEGENDARY FOUND! ‚ú®" : "Identity Found!"}
                        </div>
                        <div className="flex-1 flex flex-col items-center justify-center relative">
                            {isLegendaryEffect && (
                              <div className="absolute animate-spin-slow opacity-30">
                                <Sparkles size={100} />
                              </div>
                            )}
                            <div className={`w-20 h-20 border-4 border-[#0f380f] flex items-center justify-center text-4xl font-black mb-2 bg-[#9bbc0f] transition-all duration-1000 ${isLegendaryEffect ? 'scale-110 shadow-lg' : ''}`}>
                              {isLegendaryEffect ? "‚òÖ" : "?"}
                            </div>
                            <div className={`text-2xl font-black text-center ${isLegendaryEffect ? 'animate-bounce' : ''}`}>
                              {candidates[0]?.name || "„Éá„Éº„Çø„Å™„Åó"}
                            </div>
                        </div>
                        <button onClick={finish} className="w-full bg-[#0f380f] text-[#8bac0f] py-2 font-black text-sm active:opacity-80">
                            ÔºØÔº´ÔºÅ
                        </button>
                    </div>
                )}

                {view === 'pokedex' && (
                    <div className="flex-1 flex flex-col overflow-hidden h-full">
                        <div className="flex justify-between border-b-4 border-[#0f380f] shrink-0 bg-[#8bac0f] z-10">
                            <span className="font-bold text-[10px] italic">ZUKAN: {foundIds.length}/151</span>
                            <button onClick={() => changeView('home')}><Home size={12}/></button>
                        </div>
                        <div className="flex-1 overflow-y-scroll p-1 space-y-1 no-scrollbar touch-auto">
                            {POKEMON_DATA.map(p => {
                                const found = foundIds.includes(p.id);
                                const selected = selectedInDex === p.id;
                                const isRare = p.id >= 144 && p.id <= 151;
                                return (
                                    <div key={p.id}>
                                        <button 
                                            onClick={() => { playSE('select'); setSelectedInDex(selected ? null : p.id); }}
                                            className={`w-full text-left px-1 py-1 text-[10px] border-2 transition-colors ${selected ? 'bg-[#0f380f] text-[#8bac0f] border-[#0f380f]' : 'border-transparent'} ${isRare && found ? 'font-black' : ''}`}
                                        >
                                            No.{String(p.id).padStart(3, '0')} {found ? p.name : "ÔºüÔºüÔºüÔºüÔºü"} {isRare && found && "‚òÖ"}
                                        </button>
                                        {selected && (
                                            <div className="bg-[#0f380f] text-[#8bac0f] p-2 text-[8px] font-bold border-t-2 border-[#8bac0f]">
                                                {isRare && <p className="mb-1 text-[7px]">‚Äª LEGENDARY CLASS</p>}
                                                <p>TYPE: {p.types.join('/')}</p>
                                                <p>COLOR: {p.color}</p>
                                                <p>STAGE: {p.stage === 0 ? "Basic" : p.stage === 1 ? "Evo 1" : "Final"}</p>
                                            </div>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                )}
            </div>
        </div>

        {/* Physical Controls */}
        <div className="mt-6 flex justify-between items-start">
            <div className="relative w-20 h-20 bg-zinc-350 rounded-full flex items-center justify-center border-2 border-zinc-500 shadow-inner">
                <div className="w-12 h-3 bg-zinc-800 rounded absolute rotate-90 border-x border-zinc-950"></div>
                <div className="w-12 h-3 bg-zinc-800 rounded border-y border-zinc-950"></div>
            </div>
            
            <div className="flex gap-4 rotate-[-15deg] mt-4 mr-2">
                <div className="flex flex-col items-center gap-1">
                    <span className="text-[6px] font-bold text-zinc-600">B</span>
                    <div className="w-10 h-10 bg-zinc-800 rounded-full border-b-4 border-zinc-950 active:border-b-0 active:translate-y-1 shadow-lg cursor-pointer" onClick={() => playSE('back')}></div>
                </div>
                <div className="flex flex-col items-center gap-1">
                    <span className="text-[6px] font-bold text-zinc-600">A</span>
                    <div className="w-10 h-10 bg-zinc-800 rounded-full border-b-4 border-zinc-950 active:border-b-0 active:translate-y-1 shadow-lg cursor-pointer" onClick={() => playSE('select')}></div>
                </div>
            </div>
        </div>

        <div className="flex justify-center gap-6 mt-4 pb-2">
            <div className="flex flex-col items-center">
                <div className="w-10 h-2 bg-zinc-800 rounded-full rotate-[-25deg] shadow-inner cursor-pointer" onClick={() => playSE('select')}></div>
                <span className="text-[5px] font-bold text-zinc-600 mt-1 uppercase">Select</span>
            </div>
            <div className="flex flex-col items-center">
                <div className="w-10 h-2 bg-zinc-800 rounded-full rotate-[-25deg] shadow-inner cursor-pointer" onClick={() => playSE('select')}></div>
                <span className="text-[5px] font-bold text-zinc-600 mt-1 uppercase">Start</span>
            </div>
        </div>
      </div>

      <style>{`
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes flash {
          0%, 100% { background-color: #8bac0f; }
          50% { background-color: #cadc9f; }
        }
        .animate-flash {
          animation: flash 0.2s ease-in-out 3;
        }
        
        @keyframes spin-slow {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .animate-spin-slow {
          animation: spin-slow 10s linear infinite;
        }
      `}</style>
    </div>
  );
};

export default App;
